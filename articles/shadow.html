<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Work with shadow matrices • NBDCtools</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Work with shadow matrices">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">NBDCtools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/NBDCtools.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/join.html">Join data</a></li>
    <li><a class="dropdown-item" href="../articles/transformation.html">Transform data</a></li>
    <li><a class="dropdown-item" href="../articles/filter.html">Filter data</a></li>
    <li><a class="dropdown-item" href="../articles/metadata.html">Work with metadata</a></li>
    <li><a class="dropdown-item" href="../articles/shadow.html">Work with shadow matrices</a></li>
    <li><a class="dropdown-item" href="../articles/benchmark.html">NBDCtools Benchmark</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nbdc-datahub/NBDCtools/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Work with shadow matrices</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nbdc-datahub/NBDCtools/blob/main/vignettes/articles/shadow.Rmd" class="external-link"><code>vignettes/articles/shadow.Rmd</code></a></small>
      <div class="d-none name"><code>shadow.Rmd</code></div>
    </div>

    
    
<p>In this vignette, we will demonstrate how to work with shadow
matrices for NBDC studies. Shadow matrices are used to store information
about the reasons for missing values in the main data (see <a href="https://docs.hbcdstudy.org/latest/datacuration/phenotypes/#shadow-matrices" class="external-link">here</a>
for more details). Currently, the HBCD Study releases shadow matrices,
while the ABCD Study does not (see below for how to use the R package
<code>naniar</code> to create a basic shadow matrix for ABCD data).</p>
<div class="section level2">
<h2 id="prepare-data">Prepare data<a class="anchor" aria-label="anchor" href="#prepare-data"></a>
</h2>
<blockquote>
<p><strong>NOTE:</strong> Before running the code in this vignette, we
assume that you have already read the <a href="NBDCtools.html">Get
started</a> page or the <a href="join.html">Join data</a> vignette, and
know how to load the data/shadow from a given NBDC study release.</p>
</blockquote>
<p>For demonstration purposes, we load a simulated HBCD dataset and
shadow matrix that are included with the package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://software.nbdc-datahub.org/NBDCtools/">NBDCtools</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Welcome to the `NBDCtools` package! For more information, visit: https://software.nbdc-datahub.org/NBDCtools/</span></span>
<span><span class="co">#&gt; This package is developed by the ABCD Data Analysis, Informatics &amp; Resource Center (DAIRC) at the J. Craig Venter Institute (JCVI)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"simulated_data_hbcd.rds"</span>, package <span class="op">=</span> <span class="st">"NBDCtools"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 20</span></span>
<span><span class="co">#&gt; Columns: 10</span></span>
<span><span class="co">#&gt; $ participant_id                                         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "sub-0000000003…</span></span>
<span><span class="co">#&gt; $ session_id                                             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "ses-V01"<span style="color: #949494;">, </span>"ses…</span></span>
<span><span class="co">#&gt; $ run_id                                                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ bio_bm_biosample_nails_results_bio_test_ordered_n      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "1"<span style="color: #949494;">, </span>"1"<span style="color: #949494;">, </span>"2"<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ mh_cg_ibqr_surg_001                                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ mh_cg_ibqr_date_taken                                  <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span>…</span></span>
<span><span class="co">#&gt; $ `bio_bm_biosample_nails_results_bio_c_delta-9-thc_n`   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ bio_bm_biosample_nails_results_bio_nail_weight         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 76<span style="color: #949494;">, </span>100<span style="color: #949494;">, </span>49<span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span>…</span></span>
<span><span class="co">#&gt; $ bio_bm_biosample_nails_results_gestational_age         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 26<span style="color: #949494;">, </span>22<span style="color: #949494;">, </span>37<span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ `img_brainswipes_xcpd-T2w_AnatOnAtlasBrainSwipes_nrev` <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">,</span>…</span></span>
<span></span>
<span><span class="va">shadow</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"simulated_data_hbcd_shadow.rds"</span>, package <span class="op">=</span> <span class="st">"NBDCtools"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">shadow</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 20</span></span>
<span><span class="co">#&gt; Columns: 10</span></span>
<span><span class="co">#&gt; $ participant_id                                         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "sub-0000000003…</span></span>
<span><span class="co">#&gt; $ session_id                                             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "ses-V01"<span style="color: #949494;">, </span>"ses…</span></span>
<span><span class="co">#&gt; $ run_id                                                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ bio_bm_biosample_nails_results_bio_test_ordered_n      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ mh_cg_ibqr_surg_001                                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Reason 1"<span style="color: #949494;">, </span>"Re…</span></span>
<span><span class="co">#&gt; $ mh_cg_ibqr_date_taken                                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Reason 2"<span style="color: #949494;">, </span>"Re…</span></span>
<span><span class="co">#&gt; $ `bio_bm_biosample_nails_results_bio_c_delta-9-thc_n`   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Reason 1"<span style="color: #949494;">, </span>"Re…</span></span>
<span><span class="co">#&gt; $ bio_bm_biosample_nails_results_bio_nail_weight         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>"Re…</span></span>
<span><span class="co">#&gt; $ bio_bm_biosample_nails_results_gestational_age         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>"Re…</span></span>
<span><span class="co">#&gt; $ `img_brainswipes_xcpd-T2w_AnatOnAtlasBrainSwipes_nrev` <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Reason 3"<span style="color: #949494;">, </span>"Re…</span></span></code></pre></div>
<blockquote>
<p><strong>IMPORTANT:</strong> Before running any shadow-related
functions, it is very important to ensure that the <em>dimensions of the
main data and shadow matrix match</em>, i.e., that they have the same
number of rows and columns, all the columns in the main data are also
present in the shadow matrix, and all the identifier pairs
(<code>participant_id</code>, <code>session_id</code>,
<code>run_id</code>) exist in both data frames.</p>
</blockquote>
<p>The <code><a href="../reference/join_tabulated.html">join_tabulated()</a></code> function has a parameter
<code>remove_empty_rows</code> that removes rows that only have missing
values by default. This can lead to a situation where the main data and
shadow matrix have different dimensions, which will cause problems in
the subsequent shadow-related functions. If you know that downstream
processing involves shadow matrices, make sure to set this parameter to
<code>remove_empty_rows = FALSE</code> when calling
<code><a href="../reference/join_tabulated.html">join_tabulated()</a></code>.</p>
<p>This is not a problem if you are using <code><a href="../reference/create_dataset.html">create_dataset()</a></code>
function, as it automatically sets
<code>remove_empty_rows = FALSE</code> when creating a dataset with
shadow matrix.</p>
</div>
<div class="section level2">
<h2 id="bind-shadow-matrix-to-main-data">Bind shadow matrix to main data<a class="anchor" aria-label="anchor" href="#bind-shadow-matrix-to-main-data"></a>
</h2>
<div class="section level3">
<h3 id="using-a-provided-shadow-matrix">Using a provided shadow matrix<a class="anchor" aria-label="anchor" href="#using-a-provided-shadow-matrix"></a>
</h3>
<p>If you have a data frame with a shadow matrix, you can bind it to the
main data using the <code><a href="../reference/shadow_bind_data.html">shadow_bind_data()</a></code> function. This
function will bind the shadow matrix to the data using the identifier
columns (<code>participant_id</code>, <code>session_id</code>, and
<code>run_id</code> by default). The appended shadow columns will have
the same column names as the corresponding columns in the main data, but
with a suffix (<code>_shadow</code> by default).</p>
<ul>
<li>If there are rows with identifier pairs in the main data that don’t
exist in the shadow matrix, the appended shadow matrix rows will be
filled with <code>NA</code> values.</li>
<li>If there are rows with identifier pairs in the shadow matrix that
don’t exist in the main data, these rows will be dropped from the
resulting data frame.</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/shadow_bind_data.html">shadow_bind_data</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  shadow <span class="op">=</span> <span class="va">shadow</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 20</span></span>
<span><span class="co">#&gt; Columns: 17</span></span>
<span><span class="co">#&gt; $ participant_id                                                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "sub-000…</span></span>
<span><span class="co">#&gt; $ session_id                                                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "ses-V01…</span></span>
<span><span class="co">#&gt; $ run_id                                                        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ bio_bm_biosample_nails_results_bio_test_ordered_n             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "1"<span style="color: #949494;">, </span>"1"…</span></span>
<span><span class="co">#&gt; $ mh_cg_ibqr_surg_001                                           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ mh_cg_ibqr_date_taken                                         <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ `bio_bm_biosample_nails_results_bio_c_delta-9-thc_n`          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ bio_bm_biosample_nails_results_bio_nail_weight                <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 76<span style="color: #949494;">, </span>100<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ bio_bm_biosample_nails_results_gestational_age                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 26<span style="color: #949494;">, </span>22<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ `img_brainswipes_xcpd-T2w_AnatOnAtlasBrainSwipes_nrev`        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ bio_bm_biosample_nails_results_bio_test_ordered_n_shadow      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ mh_cg_ibqr_surg_001_shadow                                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Reason …</span></span>
<span><span class="co">#&gt; $ mh_cg_ibqr_date_taken_shadow                                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Reason …</span></span>
<span><span class="co">#&gt; $ `bio_bm_biosample_nails_results_bio_c_delta-9-thc_n_shadow`   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Reason …</span></span>
<span><span class="co">#&gt; $ bio_bm_biosample_nails_results_bio_nail_weight_shadow         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ bio_bm_biosample_nails_results_gestational_age_shadow         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ `img_brainswipes_xcpd-T2w_AnatOnAtlasBrainSwipes_nrev_shadow` <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Reason …</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="using-a-naniar-shadow-matrix">Using a <code>naniar</code> shadow matrix<a class="anchor" aria-label="anchor" href="#using-a-naniar-shadow-matrix"></a>
</h3>
<p>If there is no shadow matrix provided, like for ABCD data, or you do
not wish to use the provided shadow matrix, you can create a shadow
matrix using the <a href="https://naniar.njtierney.com/" class="external-link"><code>naniar</code></a> R package.
To do so, set <code>naniar_shadow = TRUE</code>.</p>
<blockquote>
<p><strong>IMPORTANT:</strong> <code>naniar</code> is not a dependency
of the <code>NBDCtools</code> package, so you need to install it
separately. You can do so using the following command:</p>
</blockquote>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"naniar"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"naniar"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>To create a shadow matrix using <code>naniar</code>, you can use the
following command:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/shadow_bind_data.html">shadow_bind_data</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  shadow <span class="op">=</span> <span class="cn">NULL</span>, <span class="co"># no shadow matrix provided</span></span>
<span>  naniar_shadow <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 20</span></span>
<span><span class="co">#&gt; Columns: 17</span></span>
<span><span class="co">#&gt; $ participant_id                                            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "sub-0000000…</span></span>
<span><span class="co">#&gt; $ session_id                                                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "ses-V01"<span style="color: #949494;">, </span>"…</span></span>
<span><span class="co">#&gt; $ run_id                                                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ bio_bm_biosample_nails_results_bio_test_ordered_n         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "1"<span style="color: #949494;">, </span>"1"<span style="color: #949494;">, </span>"2…</span></span>
<span><span class="co">#&gt; $ mh_cg_ibqr_surg_001                                       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ mh_cg_ibqr_date_taken                                     <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ `bio_bm_biosample_nails_results_bio_c_delta-9-thc_n`      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ bio_bm_biosample_nails_results_bio_nail_weight            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 76<span style="color: #949494;">, </span>100<span style="color: #949494;">, </span>49<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ bio_bm_biosample_nails_results_gestational_age            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 26<span style="color: #949494;">, </span>22<span style="color: #949494;">, </span>37<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ `img_brainswipes_xcpd-T2w_AnatOnAtlasBrainSwipes_nrev`    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ bio_bm_biosample_nails_results_bio_test_ordered_n_NA      <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> !NA<span style="color: #949494;">, </span>!NA<span style="color: #949494;">, </span>!N…</span></span>
<span><span class="co">#&gt; $ mh_cg_ibqr_surg_001_NA                                    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> NA<span style="color: #949494;">, </span>NA<span style="color: #949494;">, </span>NA<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ mh_cg_ibqr_date_taken_NA                                  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> NA<span style="color: #949494;">, </span>NA<span style="color: #949494;">, </span>NA<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ `bio_bm_biosample_nails_results_bio_c_delta-9-thc_n_NA`   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> NA<span style="color: #949494;">, </span>NA<span style="color: #949494;">, </span>NA<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ bio_bm_biosample_nails_results_bio_nail_weight_NA         <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> !NA<span style="color: #949494;">, </span>!NA<span style="color: #949494;">, </span>!N…</span></span>
<span><span class="co">#&gt; $ bio_bm_biosample_nails_results_gestational_age_NA         <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> !NA<span style="color: #949494;">, </span>!NA<span style="color: #949494;">, </span>!N…</span></span>
<span><span class="co">#&gt; $ `img_brainswipes_xcpd-T2w_AnatOnAtlasBrainSwipes_nrev_NA` <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> NA<span style="color: #949494;">, </span>NA<span style="color: #949494;">, </span>NA<span style="color: #949494;">, </span>…</span></span></code></pre></div>
<p>The downside of this approach is that the shadow matrix will not
contain reasons for missing values, but will only indicate that the
value is missing. The benefit of using <code>naniar_shadow = TRUE</code>
is that you can use functionality from the <code>naniar</code> R package
to explore and visualize missingness in the data (see <a href="https://naniar.njtierney.com/articles/naniar.html" class="external-link">here</a> for
more details).</p>
</div>
</div>
<div class="section level2">
<h2 id="fix-missing-values-in-the-shadow-matrix">Fix missing values in the shadow matrix<a class="anchor" aria-label="anchor" href="#fix-missing-values-in-the-shadow-matrix"></a>
</h2>
<p>Joining shadow matrices for different tables using
<code><a href="../reference/join_tabulated.html">join_tabulated()</a></code> can result in missing values in the shadow
matrix for certain observations (e.g., because one instrument was
administered at more time points than another, or because a participant
did not complete a certain instrument). These missing values in the
shadow matrix could be mistakenly interpreted as indicating that the
main data has values for these cells. But indeed these cells are missing
in both the main data and the shadow matrix.</p>
<p>Here is a simplified example of this scenario:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_table1</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  participant_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sub-001"</span>, <span class="st">"sub-002"</span><span class="op">)</span>,</span>
<span>  session_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ses-001"</span>, <span class="st">"ses-002"</span><span class="op">)</span>,</span>
<span>  run_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"run-001"</span>, <span class="st">"run-002"</span><span class="op">)</span>,</span>
<span>  var1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"reason1"</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>  var2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="st">"reason2"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">my_table1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 5</span></span></span>
<span><span class="co">#&gt;   participant_id session_id run_id  var1    var2   </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> sub-001        ses-001    run-001 reason1 <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> sub-002        ses-002    run-002 <span style="color: #BB0000;">NA</span>      reason2</span></span>
<span></span>
<span><span class="va">my_table2</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  participant_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sub-001"</span>, <span class="st">"sub-003"</span><span class="op">)</span>,</span>
<span>  session_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ses-001"</span>, <span class="st">"ses-003"</span><span class="op">)</span>,</span>
<span>  run_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"run-001"</span>, <span class="st">"run-003"</span><span class="op">)</span>,</span>
<span>  var3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="st">"reason3"</span><span class="op">)</span>,</span>
<span>  var4 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"reason4"</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">my_table2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 5</span></span></span>
<span><span class="co">#&gt;   participant_id session_id run_id  var3    var4   </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> sub-001        ses-001    run-001 <span style="color: #BB0000;">NA</span>      reason4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> sub-003        ses-003    run-003 reason3 <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
<p>When binding these two tables together, we will get the following
result:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">id_table</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join</a></span><span class="op">(</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">my_table1</span>, <span class="va">participant_id</span>, <span class="va">session_id</span>, <span class="va">run_id</span><span class="op">)</span>,</span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">my_table2</span>, <span class="va">participant_id</span>, <span class="va">session_id</span>, <span class="va">run_id</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(participant_id, session_id, run_id)`</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">id_table</span>, <span class="va">my_table1</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">my_table2</span><span class="op">)</span> </span>
<span><span class="co">#&gt; Joining with `by = join_by(participant_id, session_id, run_id)`</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(participant_id, session_id, run_id)`</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 7</span></span></span>
<span><span class="co">#&gt;   participant_id session_id run_id  var1    var2    var3    var4   </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> sub-001        ses-001    run-001 reason1 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      reason4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> sub-002        ses-002    run-002 <span style="color: #BB0000;">NA</span>      reason2 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> sub-003        ses-003    run-003 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      reason3 <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
<p>We can see that there are missing values (<code>NA</code>) in the
<code>var3</code> and <code>var4</code> columns for the
<code>sub-002</code>/<code>ses-002</code>/<code>run-002</code> row and
in the <code>var1</code> and <code>var2</code> columns for the
<code>sub-003</code>/<code>ses-003</code>/<code>run-003</code> row. If
this table was a shadow matrix, this would indicate that there should be
values for these cells in the main data, but in reality the shadow
matrix just has missing values due to joining the two tables.</p>
<p>To fix this issue, you can use the
<code><a href="../reference/shadow_replace_binding_missing.html">shadow_replace_binding_missing()</a></code> function, which will
replace the <code>NA</code> values in the shadow matrix with a custom
value (default <code>"Missing due to joining"</code>).</p>
<p>The simulated shadow matrix does not have cases where the shadow
matrix has <code>NA</code> values due to joining. For demonstration, we
will manually convert a few values to <code>NA</code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">shadow</span><span class="op">$</span><span class="va">mh_cg_ibqr_surg_001</span></span>
<span><span class="co">#&gt;  [1] "Reason 1" "Reason 1" "Reason 1" "Reason 1" "Reason 1" "Reason 1"</span></span>
<span><span class="co">#&gt;  [7] "Reason 1" "Reason 1" "Reason 1" "Reason 1" "Reason 1" "Reason 1"</span></span>
<span><span class="co">#&gt; [13] "Reason 1" NA         "Reason 1" "Reason 1" "Reason 1" "Reason 1"</span></span>
<span><span class="co">#&gt; [19] "Reason 1" "Reason 1"</span></span>
<span><span class="co"># set them to NA</span></span>
<span><span class="va">shadow</span><span class="op">$</span><span class="va">mh_cg_ibqr_surg_001</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA_character_</span></span>
<span><span class="va">shadow</span><span class="op">$</span><span class="va">mh_cg_ibqr_surg_001</span></span>
<span><span class="co">#&gt;  [1] NA         NA         NA         NA         NA         "Reason 1"</span></span>
<span><span class="co">#&gt;  [7] "Reason 1" "Reason 1" "Reason 1" "Reason 1" "Reason 1" "Reason 1"</span></span>
<span><span class="co">#&gt; [13] "Reason 1" NA         "Reason 1" "Reason 1" "Reason 1" "Reason 1"</span></span>
<span><span class="co">#&gt; [19] "Reason 1" "Reason 1"</span></span></code></pre></div>
<p>Now we can use the <code><a href="../reference/shadow_replace_binding_missing.html">shadow_replace_binding_missing()</a></code>
function to replace the <code>NA</code> values in the shadow matrix with
an indicator:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/shadow_replace_binding_missing.html">shadow_replace_binding_missing</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  shadow <span class="op">=</span> <span class="va">shadow</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 10</span></span></span>
<span><span class="co">#&gt;    participant_id session_id run_id bio_bm_biosample_nails…¹ mh_cg_ibqr_surg_001</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> sub-0000000003 ses-V01    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>                       Missing due to joi…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> sub-0000000004 ses-V01    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>                       Missing due to joi…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> sub-0000000003 ses-V02    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>                       Missing due to joi…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> sub-0000000005 ses-V01    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>                       Missing due to joi…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> sub-0000000002 ses-V02    1      <span style="color: #BB0000;">NA</span>                       Missing due to joi…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> sub-0000000009 ses-V01    <span style="color: #BB0000;">NA</span>     Reason 3                 Reason 1           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> sub-0000000020 ses-V02    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>                       Reason 1           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> sub-0000000013 ses-V01    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>                       Reason 1           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> sub-0000000016 ses-V02    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>                       Reason 1           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> sub-0000000014 ses-V01    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>                       Reason 1           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> sub-0000000015 ses-V02    1      <span style="color: #BB0000;">NA</span>                       Reason 1           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> sub-0000000011 ses-V02    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>                       Reason 1           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> sub-0000000017 ses-V02    1      <span style="color: #BB0000;">NA</span>                       Reason 1           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> sub-0000000007 ses-V01    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>                       <span style="color: #BB0000;">NA</span>                 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> sub-0000000006 ses-V01    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>                       Reason 1           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> sub-0000000018 ses-V01    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>                       Reason 1           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> sub-0000000019 ses-V02    2      <span style="color: #BB0000;">NA</span>                       Reason 1           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> sub-0000000008 ses-V01    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>                       Reason 1           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> sub-0000000010 ses-V01    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>                       Reason 1           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> sub-0000000012 ses-V03    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>                       Reason 1           </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ abbreviated name: ¹​bio_bm_biosample_nails_results_bio_test_ordered_n</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: mh_cg_ibqr_date_taken &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `bio_bm_biosample_nails_results_bio_c_delta-9-thc_n` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   bio_bm_biosample_nails_results_bio_nail_weight &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   bio_bm_biosample_nails_results_gestational_age &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `img_brainswipes_xcpd-T2w_AnatOnAtlasBrainSwipes_nrev` &lt;chr&gt;</span></span></span></code></pre></div>
<p>As you can see, the <code>mh_cg_ibqr_surg_001</code> column now has
<code>"Missing due to joining"</code> values.</p>
<blockquote>
<p><strong>IMPORTANT:</strong> Unlike the
<code><a href="../reference/shadow_bind_data.html">shadow_bind_data()</a></code> where unmatched rows between the main
data and the shadow matrix are allowed, this function requires the
dimensions of the data and shadow matrix to match, i.e., to have the
same number of rows and columns. If they do not match, the function will
throw an error.</p>
</blockquote>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Janosch Linkersdoerfer, Le Zhang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
