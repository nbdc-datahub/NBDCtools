<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Convert column names in a file — convert_names_file • NBDCtools</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert column names in a file — convert_names_file"><meta name="description" content="This function replaces all matched column names in a file
with another type of column name specified in the data dictionary.
For example, this function can be used to convert script files that specified
previously used column names to the the ABCD column names introduced in the
6.0 release. If you instead want to convert the column names in a data frame,
use convert_names_data().
Note: Please use this function with caution and make sure that the data in
the converted column is equivalent to the data in the original column. Also,
please make sure that the names can be mapped one-to-one. Some variables in
the ABCD data dictionary have been collapsed from previous releases and thus
might have multiple names in the name_from column that map to a single name
(see skip_sep_check argument below)."><meta property="og:description" content="This function replaces all matched column names in a file
with another type of column name specified in the data dictionary.
For example, this function can be used to convert script files that specified
previously used column names to the the ABCD column names introduced in the
6.0 release. If you instead want to convert the column names in a data frame,
use convert_names_data().
Note: Please use this function with caution and make sure that the data in
the converted column is equivalent to the data in the original column. Also,
please make sure that the names can be mapped one-to-one. Some variables in
the ABCD data dictionary have been collapsed from previous releases and thus
might have multiple names in the name_from column that map to a single name
(see skip_sep_check argument below)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">NBDCtools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/NBDCtools.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/join.html">Join data</a></li>
    <li><a class="dropdown-item" href="../articles/transformation.html">Transform data</a></li>
    <li><a class="dropdown-item" href="../articles/filter.html">Filter data</a></li>
    <li><a class="dropdown-item" href="../articles/metadata.html">Work with metadata</a></li>
    <li><a class="dropdown-item" href="../articles/shadow.html">Work with shadow matrices</a></li>
    <li><a class="dropdown-item" href="../articles/benchmark.html">NBDCtools Benchmark</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nbdc-datahub/NBDCtools/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Convert column names in a file</h1>
      <small class="dont-index">Source: <a href="https://github.com/nbdc-datahub/NBDCtools/blob/main/R/utils.R" class="external-link"><code>R/utils.R</code></a></small>
      <div class="d-none name"><code>convert_names_file.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function replaces all matched column names in a file
with another type of column name specified in the data dictionary.</p>
<p>For example, this function can be used to convert script files that specified
previously used column names to the the ABCD column names introduced in the
6.0 release. If you instead want to convert the column names in a data frame,
use <code><a href="convert_names_data.html">convert_names_data()</a></code>.</p>
<p>Note: Please use this function with caution and make sure that the data in
the converted column is equivalent to the data in the original column. Also,
please make sure that the names can be mapped one-to-one. Some variables in
the ABCD data dictionary have been collapsed from previous releases and thus
might have multiple names in the <code>name_from</code> column that map to a single name
(see <code>skip_sep_check</code> argument below).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">convert_names_file</span><span class="op">(</span></span>
<span>  <span class="va">file_in</span>,</span>
<span>  file_out <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">dd</span>,</span>
<span>  <span class="va">name_from</span>,</span>
<span>  <span class="va">name_to</span>,</span>
<span>  skip_sep_check <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-file-in">file_in<a class="anchor" aria-label="anchor" href="#arg-file-in"></a></dt>
<dd><p>character. The input file path.</p></dd>


<dt id="arg-file-out">file_out<a class="anchor" aria-label="anchor" href="#arg-file-out"></a></dt>
<dd><p>character. The output file path. If not provided,
defaults to the input file path with a "_converted" suffix.</p></dd>


<dt id="arg-dd">dd<a class="anchor" aria-label="anchor" href="#arg-dd"></a></dt>
<dd><p>tibble. The data dictionary table. One can use <code><a href="get_dd.html">get_dd()</a></code> family of
functions to get the data dictionary for a given study and release or
provide a custom data dictionary.</p></dd>


<dt id="arg-name-from">name_from<a class="anchor" aria-label="anchor" href="#arg-name-from"></a></dt>
<dd><p>character. The column name type in the data dictionary that
the columns in <code>data</code> currently use (Default: <code>"name"</code>). This column
must exist in the data dictionary.</p></dd>


<dt id="arg-name-to">name_to<a class="anchor" aria-label="anchor" href="#arg-name-to"></a></dt>
<dd><p>character. The column name type in the data dictionary
that the columns in <code>data</code> should be renamed to. This column
must exist in the data dictionary.</p></dd>


<dt id="arg-skip-sep-check">skip_sep_check<a class="anchor" aria-label="anchor" href="#arg-skip-sep-check"></a></dt>
<dd><p>logical. Whether to skip the check for
<code>name_from</code> and <code>name_to</code> columns' separators validation.
In our official data dictionaries, some columns have
multiple names separated by a <code>"|"</code> in the same cell.</p>
<p>For columns with multiple names, it the recommended to use functions like
<code><a href="https://tidyr.tidyverse.org/reference/separate_rows.html" class="external-link">tidyr::separate_rows()</a></code> to split the names into multiple
rows and decide which name to use for the renaming by filtering the rows,
so that the <code>name_from</code> and <code>name_to</code> columns are one-to-one
mapping.</p>
<p>If <code>skip_sep_check = FALSE</code> (default), the function will check if the
<code>name_from</code> or <code>name_to</code> columns have the <code>"|"</code> separator and will throw
an error if the separator is found. If <code>skip_sep_check = TRUE</code>, it means
you understand that character strings with <code>"|"</code> inside will be used for
rename mapping, and the function will not check for the separator.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>character. The path to the output file with converted names,
invisible.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="word-matching">Word matching<a class="anchor" aria-label="anchor" href="#word-matching"></a></h3>


<p>The function uses word boundaries to match the names in the file.
It Uses regex word boundaries (<code>\\b</code>) to
ensure exact word matches. This prevents partial matches within larger
words. For example, matching "age" will not match "cage" or "page".</p>
</div>

<div class="section">
<h3 id="speed">Speed<a class="anchor" aria-label="anchor" href="#speed"></a></h3>


<p>The data dictionary is big from <code><a href="get_dd.html">get_dd()</a></code>, so the function
would loop through all the names in the data dictionary.
If there are only a few names to replace,
it is the best to trim the data dictionary to only those names
before using this function.</p>
</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">convert_names_file</span><span class="op">(</span></span></span>
<span class="r-in"><span>  file_in <span class="op">=</span> <span class="st">"analysis_script.R"</span>,</span></span>
<span class="r-in"><span>  dd <span class="op">=</span> <span class="fu"><a href="get_dd.html">get_dd</a></span><span class="op">(</span><span class="st">"abcd"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  name_from <span class="op">=</span> <span class="st">"name_nda"</span>,</span></span>
<span class="r-in"><span>  name_to <span class="op">=</span> <span class="st">"name"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Specify custom output file</span></span></span>
<span class="r-in"><span><span class="fu">convert_names_file</span><span class="op">(</span></span></span>
<span class="r-in"><span>  file_in <span class="op">=</span> <span class="st">"analysis_script.py"</span>,</span></span>
<span class="r-in"><span>  file_out <span class="op">=</span> <span class="st">"analysis_script_new.py"</span>,</span></span>
<span class="r-in"><span>  dd <span class="op">=</span> <span class="fu"><a href="get_dd.html">get_dd</a></span><span class="op">(</span><span class="st">"abcd"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  name_from <span class="op">=</span> <span class="st">"name_nda"</span>,</span></span>
<span class="r-in"><span>  name_to <span class="op">=</span> <span class="st">"name"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Janosch Linkersdoerfer, Le Zhang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

