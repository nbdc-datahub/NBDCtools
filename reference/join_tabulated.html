<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Join tabulated data — join_tabulated • NBDCtools</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Join tabulated data — join_tabulated"><meta name="description" content="Joins selected variables and/or whole tables from the tabulated data/shadow
files into a single data frame. Expects the data files to be stored in one
directory in .parquet or .tsv format, with one file per table following
the naming convention of the respective NBDC dataset (from the ABCD or HBCD
studies). Typically, this will be the rawdata/phenotype/ directory within
a BIDS dataset downloaded from the NBDC Data Hub.
Variables specified in vars and tables will be full-joined together,
i.e., all rows will be kept, even if they do not have a value for all
columns. Variables specified in vars_add will be left-joined to the
variables selected in vars and tables, i.e., only the values for already
existing rows will be added and no new rows will be created. This is useful
for adding variables to the dataset that are important for a given analysis
but are not the main variables of interest (e.g., design/nesting or
demographic information). By left-joining these variables, one avoids
creating new rows that contain only missing values for the main variables of
interest selected using vars and tables. If the same variables are
specified in vars/tables and vars_add/tables_add, the variables in
vars_add/tables_add will be ignored.
In addition to the main join_tabulated() function, there are two
study-specific variations:
join_tabulated_abcd(): for the ABCD study.
join_tabulated_hbcd(): for the HBCD study.


They have the same arguments as the join_tabulated() function, except
that the study argument is set to the respective study by default, and
should not be set by the user."><meta property="og:description" content="Joins selected variables and/or whole tables from the tabulated data/shadow
files into a single data frame. Expects the data files to be stored in one
directory in .parquet or .tsv format, with one file per table following
the naming convention of the respective NBDC dataset (from the ABCD or HBCD
studies). Typically, this will be the rawdata/phenotype/ directory within
a BIDS dataset downloaded from the NBDC Data Hub.
Variables specified in vars and tables will be full-joined together,
i.e., all rows will be kept, even if they do not have a value for all
columns. Variables specified in vars_add will be left-joined to the
variables selected in vars and tables, i.e., only the values for already
existing rows will be added and no new rows will be created. This is useful
for adding variables to the dataset that are important for a given analysis
but are not the main variables of interest (e.g., design/nesting or
demographic information). By left-joining these variables, one avoids
creating new rows that contain only missing values for the main variables of
interest selected using vars and tables. If the same variables are
specified in vars/tables and vars_add/tables_add, the variables in
vars_add/tables_add will be ignored.
In addition to the main join_tabulated() function, there are two
study-specific variations:
join_tabulated_abcd(): for the ABCD study.
join_tabulated_hbcd(): for the HBCD study.


They have the same arguments as the join_tabulated() function, except
that the study argument is set to the respective study by default, and
should not be set by the user."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">NBDCtools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/NBDCtools.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/join.html">Join data</a></li>
    <li><a class="dropdown-item" href="../articles/transformation.html">Transform data</a></li>
    <li><a class="dropdown-item" href="../articles/filter.html">Filter data</a></li>
    <li><a class="dropdown-item" href="../articles/metadata.html">Work with metadata</a></li>
    <li><a class="dropdown-item" href="../articles/shadow.html">Work with shadow matrices</a></li>
    <li><a class="dropdown-item" href="../articles/benchmark.html">NBDCtools Benchmark</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nbdc-datahub/NBDCtools/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Join tabulated data</h1>
      <small class="dont-index">Source: <a href="https://github.com/nbdc-datahub/NBDCtools/blob/main/R/join.R" class="external-link"><code>R/join.R</code></a></small>
      <div class="d-none name"><code>join_tabulated.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Joins selected variables and/or whole tables from the tabulated data/shadow
files into a single data frame. Expects the data files to be stored in one
directory in <code>.parquet</code> or <code>.tsv</code> format, with one file per table following
the naming convention of the respective NBDC dataset (from the ABCD or HBCD
studies). Typically, this will be the <code>rawdata/phenotype/</code> directory within
a BIDS dataset downloaded from the NBDC Data Hub.</p>
<p>Variables specified in <code>vars</code> and <code>tables</code> will be full-joined together,
i.e., all rows will be kept, even if they do not have a value for all
columns. Variables specified in <code>vars_add</code> will be left-joined to the
variables selected in <code>vars</code> and <code>tables</code>, i.e., only the values for already
existing rows will be added and no new rows will be created. This is useful
for adding variables to the dataset that are important for a given analysis
but are not the main variables of interest (e.g., design/nesting or
demographic information). By left-joining these variables, one avoids
creating new rows that contain only missing values for the main variables of
interest selected using <code>vars</code> and <code>tables</code>. If the same variables are
specified in <code>vars</code>/<code>tables</code> and <code>vars_add</code>/<code>tables_add</code>, the variables in
<code>vars_add</code>/<code>tables_add</code> will be ignored.</p>
<p>In addition to the main <code>join_tabulated()</code> function, there are two
study-specific variations:</p><ul><li><p><code>join_tabulated_abcd()</code>: for the ABCD study.</p></li>
<li><p><code>join_tabulated_hbcd()</code>: for the HBCD study.</p></li>
</ul><p>They have the same arguments as the <code>join_tabulated()</code> function, except
that the <code>study</code> argument is set to the respective study by default, and
should not be set by the user.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">join_tabulated</span><span class="op">(</span></span>
<span>  <span class="va">dir_data</span>,</span>
<span>  <span class="va">study</span>,</span>
<span>  vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tables <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  vars_add <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tables_add <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  release <span class="op">=</span> <span class="st">"latest"</span>,</span>
<span>  format <span class="op">=</span> <span class="st">"parquet"</span>,</span>
<span>  shadow <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  remove_empty_rows <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  bypass_ram_check <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">join_tabulated_abcd</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">join_tabulated_hbcd</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dir-data">dir_data<a class="anchor" aria-label="anchor" href="#arg-dir-data"></a></dt>
<dd><p>character. Path to the directory with the data files in
<code>.parquet</code> or <code>.tsv</code> format.</p></dd>


<dt id="arg-study">study<a class="anchor" aria-label="anchor" href="#arg-study"></a></dt>
<dd><p>character. NBDC study (One of <code>"abcd"</code> or <code>"hbcd"</code>).</p></dd>


<dt id="arg-vars">vars<a class="anchor" aria-label="anchor" href="#arg-vars"></a></dt>
<dd><p>character (vector). Name(s) of variable(s) to be joined.
(Default: <code>NULL</code>, i.e., no variables are selected; one of <code>tables</code> or
<code>vars</code> has to be provided).</p></dd>


<dt id="arg-tables">tables<a class="anchor" aria-label="anchor" href="#arg-tables"></a></dt>
<dd><p>character (vector). Name(s) of table(s) to be joined (Default:
<code>NULL</code>, i.e., no tables are selected; one of <code>tables</code> or <code>vars</code> has to be
provided).</p></dd>


<dt id="arg-vars-add">vars_add<a class="anchor" aria-label="anchor" href="#arg-vars-add"></a></dt>
<dd><p>character (vector). Name(s) of additional variable(s) to be
left-joined to the variables selected in <code>vars</code> and <code>tables</code> (Default:
<code>NULL</code>, i.e., no additional variables are selected)</p></dd>


<dt id="arg-tables-add">tables_add<a class="anchor" aria-label="anchor" href="#arg-tables-add"></a></dt>
<dd><p>character (vector). Name(s) of additional table(s) to be
left-joined to the variables selected in <code>vars</code> and <code>tables</code> (Default:
<code>NULL</code>, i.e., no additional tables are selected)</p></dd>


<dt id="arg-release">release<a class="anchor" aria-label="anchor" href="#arg-release"></a></dt>
<dd><p>character. Release version (Default: <code>"latest"</code>)</p></dd>


<dt id="arg-format">format<a class="anchor" aria-label="anchor" href="#arg-format"></a></dt>
<dd><p>character. Data format (One of <code>"parquet"</code> or <code>"tsv"</code>; default:
<code>"parquet"</code>).</p></dd>


<dt id="arg-shadow">shadow<a class="anchor" aria-label="anchor" href="#arg-shadow"></a></dt>
<dd><p>logical. Whether to join the shadow matrix
instead of the data table (default: <code>FALSE</code>).</p></dd>


<dt id="arg-remove-empty-rows">remove_empty_rows<a class="anchor" aria-label="anchor" href="#arg-remove-empty-rows"></a></dt>
<dd><p>logical. Whether to filter out rows that have
all values missing in the joined variables, except for the
ID columns (default: <code>TRUE</code>).</p></dd>


<dt id="arg-bypass-ram-check">bypass_ram_check<a class="anchor" aria-label="anchor" href="#arg-bypass-ram-check"></a></dt>
<dd><p>logical. If <code>TRUE</code>, the function will not abort
if the number of variables exceeds 10000 and current available RAM is
less than 75% of the estimated RAM usage. This can prevent the long
loading time of the data, but failing in the middle due to insufficient RAM.
For large datasets, it is recommended to save 2 times or more of
estimated RAM before running this function.</p>
<p>This argument is only used for the ABCD study, as the HBCD data
is small enough to be loaded without RAM issues with most personal computers.
As HBCD data grows in the future, this may change.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to the underlying function
<code>join_tabulated()</code></p>
<p>Note: Turning this parameter to <code>FALSE</code> is useful for shadow matrices
processing. Some shadow-related functions expect the shadow matrix to
have the same dimensions as the original data to proceed correctly.
See <code><a href="shadow_bind_data.html">shadow_bind_data()</a></code> and <code><a href="shadow_replace_binding_missing.html">shadow_replace_binding_missing()</a></code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A tibble of data or shadow matrix with the joined variables.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">join_tabulated</span><span class="op">(</span></span></span>
<span class="r-in"><span>  dir_data <span class="op">=</span> <span class="st">"path/to/data/"</span>,</span></span>
<span class="r-in"><span>  vars     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"var_1"</span>, <span class="st">"var_2"</span>, <span class="st">"var_3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  tables   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"table_1"</span>, <span class="st">"table_2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  study    <span class="op">=</span> <span class="st">"abcd"</span>,</span></span>
<span class="r-in"><span>  release  <span class="op">=</span> <span class="st">"6.0"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Janosch Linkersdoerfer, Le Zhang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

